{% extends 'base.html' %}

{% block content %}


<h2>Start New Run</h2>

<p>All runs are saved automatically. You can <a href="/run/">review all of them</a>.</p>

{% if ran %}
<script type="text/javascript" src="{{STATIC_URL}}js/d3.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/graph.js"></script>

<p>
Ran simulation with <b>{{number_agents}}</b> agents for <b>{{ticks}}</b> ticks in<b>{{time}}</b> seconds.
</p>

<p>
Resulting agents mass mean: <b>{{mean}}</b>, stddev: <b>{{stddev}}</b>
</p>

<div class="placeholder" />

<script type="text/javascript">
var runData = [];
var runStdDevs = [];
{% for d in stats %}
runData.push({{d.mean}});runStdDevs.push({{d.std}});
{% endfor %}
makeGraph("div.placeholder", runData, runStdDevs);
</script>

{% endif %}


<form action="." method="post" class="form-horizontal" role="form">

  <div class="form-group">
    <label for="inputAgents" class="col-sm-2 control-label">How many agents?</label>
    <div class="col-sm-3">
      <input type="text" class="form-control" id="inputAgents" placeholder="agents" value="{{number_agents}}" name="number_agents" />
    </div>
  </div>
  
  <div class="form-group">
    <label for="inputTicks" class="col-sm-2 control-label">How many ticks?</label>
    <div class="col-sm-3">
      <input class="form-control" id="inputTicks" placeholder="ticks" type="text" value="{{ticks}}" name="ticks" />
    </div>
  </div>
  
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-3">
      <button type="submit" class="btn btn-default">Run it!</button>
    </div>
  </div>
  
</form>

{% endblock %}

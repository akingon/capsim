{% extends 'base.html' %}
{% load waffle_tags %}

{% load bootstrap %}

		{% block topnav %}
		<li><a href="/model/" title="Learn all about PHCX and the math behind it.">About</a></li>
		<li><a href="/contact/" title="Get in touch.">Contact</a></li>
		<li><a href="/topics/" title="These are all of the simulations available.">Topics</a></li>
		<!--
		<li><a href="/pages/introduction/" title="Ramp up your understanding with this handy tutorial.">Priming Exercises</a></li>
		{% flag simulation %}
		<li class="active"><a href="/run/new/" title="Create a new run.">Start New Run</a></li>
		<li><a href="/run/" title="See all the runs.">Saved Runs</a></li>
		{% else %}
		<li><span class="navbar-text">[Simulation Deactivated]</span></li>
		{% endflag %}
		-->
		{% endblock %}

{% block content %}

<h2>Simulation</h2>

<h1>Obesity</h1>

<!--start 4 part topic subnav-->
<ul class="nav nav-tabs nav-justified">
<li><a href="/topic-obesity/">Introduction</a></li>
<li><a href="/pages/introduction/" title="Ramp up your understanding with this handy tutorial.">Exercises</a></li>
<li class="active"><a href="/run/new/" title="Create a new run.">Simulation</a></li>
<li><a href="/topic-obesity-debrief/">Debrief</a></li>
</ul>
<!--stop 4 part topic subnav-->


{% flag simulation %}
{% if request.user.is_staff %}
<div class="well"><form action="/run/toggle/" method="post">Staff only: <input type="submit" class="btn btn-warning"
				 value="Disable Simulation" /></form></div>
{% endif %}
<h2>Start New Run</h2>


<p>All runs are saved automatically. You can <a href="/run/">review all of them</a>.</p>

{% if ran %}
<script type="text/javascript" src="{{STATIC_URL}}js/d3.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/graph.js"></script>

<p>
Ran simulation with <b>{{number_agents}}</b> agents for <b>{{ticks}}</b> ticks in<b>{{time}}</b> seconds.
</p>

<p>
Resulting agents mass mean: <b>{{mean}}</b>, stddev: <b>{{stddev}}</b>
</p>

<div class="placeholder" />

<script type="text/javascript">
var runData = [];
var runStdDevs = [];
{% for d in stats %}
runData.push({{d.mean}});runStdDevs.push({{d.std}});
{% endfor %}
makeGraph("div.placeholder", runData, runStdDevs);
</script>

{% endif %}

<form action="." method="post" class="form-horizontal" role="form" id="test-new-run-form">

{{ form.non_field_errors }}

<div class="well">
	<div class="row">
	
<div class="col-md-4">

  <div class="form-group">
		{{ form.number_agents.errors }}
    <label for="inputAgents" class="col-sm-4 ">How many agents?</label>
    <div class="col-sm-8">
			{{ form.number_agents }}
    </div>
  </div>
</div>

<div class="col-md-4">
  <div class="form-group">
		{{ form.ticks.errors }}
    <label for="inputTicks" class="col-sm-4 ">How many ticks?</label>
    <div class="col-sm-8">
      {{ form.ticks }}
    </div>
  </div>

</div>
<div class="col-md-4">

</div>
</div>
</div>
<div class="well">
<div class="row">
<div class="col-md-4">
  <div class="form-group">
		{{ form.gamma_1.errors }}
    <label for="inputGamma1" class="col-sm-4 ">Gamma 1</label>
    <div class="col-sm-8">
      {{ form.gamma_1 }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.gamma_2.errors }}
    <label for="inputGamma2" class="col-sm-4 ">Gamma 2</label>
    <div class="col-sm-8">
      {{ form.gamma_2 }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.gamma_3.errors }}
    <label for="inputGamma3" class="col-sm-4 ">Gamma 3</label>
    <div class="col-sm-8">
      {{ form.gamma_3 }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.gamma_4.errors }}
    <label for="inputGamma4" class="col-sm-4 ">Gamma 4</label>
    <div class="col-sm-8">
      {{ form.gamma_4 }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.gamma_5.errors }}
    <label for="inputGamma5" class="col-sm-4 ">Gamma 5</label>
    <div class="col-sm-8">
      {{ form.gamma_5 }}
    </div>
  </div>
  
  <div class="form-group">
		{{ form.gamma_6.errors }}
    <label for="inputGamma6" class="col-sm-4 ">Gamma 6</label>
    <div class="col-sm-8">
      {{ form.gamma_6 }}
    </div>
  </div>

</div>
<div class="col-md-4">
  <div class="form-group">
		{{ form.agent_initial_mass_mean.errors }}
    <label for="inputAgentInitialMassMean" class="col-sm-4
    ">Agent Initial Mass Mean</label>
    <div class="col-sm-8">
      {{ form.agent_initial_mass_mean }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.agent_initial_mass_sigma.errors }}
    <label for="inputAgentInitialMassSigma" class="col-sm-4
    ">Agent Initial Mass Sigma</label>
    <div class="col-sm-8">
      {{ form.agent_initial_mass_sigma }}
    </div>
  </div>

  <div class="form-group">
		{{ form.agent_base_output_mean.errors }}
    <label for="inputAgentBaseOutputMean" class="col-sm-4
    ">Agent Base Output Mean</label>
    <div class="col-sm-8">
      {{ form.agent_base_output_mean }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.agent_base_output_sigma.errors }}
    <label for="inputAgentBaseOuputSigma" class="col-sm-4
    ">Agent Base Output Sigma</label>
    <div class="col-sm-8">
      {{ form.agent_base_output_sigma }}
    </div>
  </div>

</div>
<div class="col-md-4">
  <div class="form-group">
		{{ form.sigma_1.errors }}
    <label for="inputSigma1" class="col-sm-4 ">Sigma 1</label>
    <div class="col-sm-8">
      {{ form.sigma_1 }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.sigma_2.errors }}
    <label for="inputSigma2" class="col-sm-4 ">Sigma 2</label>
    <div class="col-sm-8">
      {{ form.sigma_2 }}
    </div>
  </div>

</div>
</div>
</div>
<div class="well">
<div class="row">
<div class="col-md-4">

  <div class="form-group">
		{{ form.recreation_activity_alpha.errors }}
    <label for="inputRecreationActivityAlpha" class="col-sm-4
    ">Recreation Activity Alpha</label>
    <div class="col-sm-8">
      {{ form.recreation_activity_alpha }}
    </div>
  </div>
  <div class="form-group">
		{{ form.recreation_activity_lambda.errors }}
    <label for="inputRecreationActivityLambda" class="col-sm-4
    ">Recreation Activity Lambda</label>
    <div class="col-sm-8">
      {{ form.recreation_activity_lambda }}
    </div>
  </div>


  <div class="form-group">
		{{ form.education_activity_alpha.errors }}
    <label for="inputEducationActivityAlpha" class="col-sm-4
    ">Education Activity Alpha</label>
    <div class="col-sm-8">
      {{ form.education_activity_alpha }}
    </div>
  </div>

  <div class="form-group">
		{{ form.education_activity_lambda.errors }}
    <label for="inputEducationActivityLambda" class="col-sm-4
    ">Education Activity Lambda</label>
    <div class="col-sm-8">
      {{ form.education_activity_lambda }}
    </div>
  </div>

  <div class="form-group">
		{{ form.food_convenience_alpha.errors }}
    <label for="inputFoodConvenienceAlpha" class="col-sm-4
    ">Food Convenience Alpha</label>
    <div class="col-sm-3">
      {{ form.food_convenience_alpha }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.food_convenience_lambda.errors }}
    <label for="inputFoodConvenienceLambda" class="col-sm-4
    ">Food Convenience Lambda</label>
    <div class="col-sm-8">
      {{ form.food_convenience_lambda }}
    </div>
  </div>


</div>
<div class="col-md-4">
  <div class="form-group">
		{{ form.domestic_activity_alpha.errors }}
    <label for="inputDomesticActivityAlpha" class="col-sm-4
    ">Domestic Activity Alpha</label>
    <div class="col-sm-8">
      {{ form.domestic_activity_alpha }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.domestic_activity_lambda.errors }}
    <label for="inputDomesticActivityLambda" class="col-sm-4
    ">Domestic Activity Lambda</label>
    <div class="col-sm-8">
      {{ form.domestic_activity_lambda }}
    </div>
  </div>

  <div class="form-group">
		{{ form.energy_density_alpha.errors }}
    <label for="inputEnergyDensityAlpha" class="col-sm-4
    ">Energy Density Alpha</label>
    <div class="col-sm-8">
      {{ form.energy_density_alpha }}
    </div>
  </div>
  <div class="form-group">
		{{ form.energy_density_lambda.errors }}
    <label for="inputEnergyDensityLambda" class="col-sm-4
    ">Energy Density Lambda</label>
    <div class="col-sm-8">
      {{ form.energy_density_lambda }}
    </div>
  </div>

 <div class="form-group">
		{{ form.food_literacy_alpha.errors }}
    <label for="inputFoodLiteracyAlpha" class="col-sm-4
    ">Food Literacy Alpha</label>
    <div class="col-sm-8">
      {{ form.food_literacy_alpha }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.food_literacy_lambda.errors }}
    <label for="inputFoodLiteracyLambda" class="col-sm-4
    ">Food Literacy Lambda</label>
    <div class="col-sm-8">
      {{ form.food_literacy_lambda }}
    </div>
  </div>



</div>
<div class="col-md-4">

 <div class="form-group">
		{{ form.transport_activity_alpha.errors }}
    <label for="inputTransportActivityAlpha" class="col-sm-4
    ">Transport Activity Alpha</label>
    <div class="col-sm-8">
      {{ form.transport_activity_alpha }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.transport_activity_lambda.errors }}
    <label for="inputTransportActivityLambda" class="col-sm-4
    ">Transport Activity Lambda</label>
    <div class="col-sm-8">
      {{ form.transport_activity_lambda }}
    </div>
  </div>


  <div class="form-group">
		{{ form.food_exposure_alpha.errors }}
    <label for="inputFoodExposureAlpha" class="col-sm-4
    ">Food Exposure Alpha</label>
    <div class="col-sm-8">
      {{ form.food_exposure_alpha }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.food_exposure_lambda.errors }}
    <label for="inputFoodExposureLambda" class="col-sm-4
    ">Food Exposure Lambda</label>
    <div class="col-sm-8">
      {{ form.food_exposure_lambda }}
    </div>
  </div>

  <div class="form-group">
		{{ form.food_advertising_alpha.errors }}
    <label for="inputFoodAdvertisingAlpha" class="col-sm-4
    ">Food Advertising Alpha</label>
    <div class="col-sm-3">
      {{ form.food_advertising_alpha }}
    </div>
  </div>
  
  
  <div class="form-group">
		{{ form.food_advertising_lambda.errors }}
    <label for="inputFoodAdvertisingLambda" class="col-sm-4
    ">Food Advertising Lambda</label>
    <div class="col-sm-8">
      {{ form.food_advertising_lambda }}
    </div>
  </div>



</div>
</div>
</div>
<div class="form-group">
<div class="col-sm-12">
<button type="submit" class="btn pull-right">Run it!</button>
</div>
</div>
  
</form>


<h3>New Run</h3>

<strong>These are sample inputs. The simulation is not active yet.</strong>

<hr />

<div class="container">

	<form role="form">
	
		<div class="row well">
		
			<legend> Standing Conditions <a href="#" type="button" class="moreinfo btn btn-default btn-xs pull-right" data-container="body" data-toggle="popover" data-placement="left" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."> <span class="glyphicon glyphicon-question-sign"></span> </a> </legend> 
			
			<div class="col-md-3">
			
				<div class="form-group">
					<label for="">Mass</label> 
					<div>#</div>
				</div>
				
			</div>
		
			<div class="col-md-3">
							
				<div class="form-group">
					<label for="">Total Output</label> 
					<div>#</div>
				</div>
				
			</div>
		
			<div class="col-md-3">
							
				<div class="form-group">
					<label for="">Input</label> 
					<div>#</div>
				</div>
				
			</div>
		
			<div class="col-md-3">
			
				<div class="form-group">
					<label for="">Base Output</label> 
					<div>#</div>
				</div>

			</div>
			
		</div>
		
		<div class="row well">
		
			<legend> Physical Activity <a href="#" type="button" class="moreinfo btn btn-default btn-xs pull-right" data-container="body" data-toggle="popover" data-placement="left" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."> <span class="glyphicon glyphicon-question-sign"></span> </a> </legend> 
			
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Recreational</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
					</div>
				
				<div class="form-group">
					<label for="">Physical Education</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
					</div>
				
			</div>
		
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Domestic</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
				<div class="form-group">
					<label for="">Social Influence</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
			</div>
		
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Transportation</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
				
				
				
			</div>
			
		</div>
		
		
		<div class="row well">
		
			<legend> Diet <a href="#" type="button" class="moreinfo btn btn-default btn-xs pull-right" data-container="body" data-toggle="popover" data-placement="left" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."> <span class="glyphicon glyphicon-question-sign"></span> </a> </legend> 
			
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Food Exposure</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
					</div>
				
				<div class="form-group">
					<label for="">Convenience of Food Offerings</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
					</div>
				
			</div>
		
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Energy Density of Food</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
				<div class="form-group">
					<label for="">Nutritional Literacy</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
			</div>
		
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Exposure to Food Advertising</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
				
				<div class="form-group">
					<label for="">Social Influence</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
				
			</div>
			
		</div>		
		
		<div class="row well">
		
			<legend> Individual Behavior <a href="#" type="button" class="moreinfo btn btn-default btn-xs pull-right" data-container="body" data-toggle="popover" data-placement="left" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."> <span class="glyphicon glyphicon-question-sign"></span> </a> </legend> 
			
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Force of Habit</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
					</div>
				
			</div>
		
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">C-Control</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
				
			</div>
		
			<div class="col-md-4">
			
				<div class="form-group">
					<label for="">Physical Activity</label> 
					<select class="form-control">
					  <option>Select Level</option>
					  <option>High</option>
					  <option>Medium</option>
					  <option>Low</option>
					</select>				
				</div>
								
			</div>
			
		</div>		
		<div class="row well">
		
			<legend> Targets <a href="#" type="button" class="moreinfo btn btn-default btn-xs pull-right" data-container="body" data-toggle="popover" data-placement="left" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."> <span class="glyphicon glyphicon-question-sign"></span> </a> </legend> 
		
			<div class="col-md-4">
				<div class="form-group">
					<label>Individuals</label> 
					<div class="radio">
						<label> 
						<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
						Yes</label> 
					</div>
					<div class="radio">
						<label> 
						<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
						No</label> 
					</div>
				</div>
			</div>
			
			<div class="col-md-4">
				<div class="form-group">
					<label>Neighborhoods</label> 
					<div class="radio">
						<label> 
						<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
						Yes </label> 
					</div>
					<div class="radio">
						<label> 
						<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
						No </label> 
					</div>
				</div>
			</div>
			
			<div class="col-md-4">
				<div class="form-group">
					<label>Distribution</label> 
					<div class="radio">
						<label> 
						<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
						Whole </label> 
					</div>
					<div class="radio">
						<label> 
						<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
						Tails 
						</label>
						<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Tails %" style="width: 8em;">
					</div>
				</div>
			</div>
		</div>
		
		<div class="row">
			<button type="button" class="btn btn-success btn-lg btn-block"><strong>Run It</strong></button> 
			<button type="button" class="btn btn-danger btn-lg btn-block">Reset All Parameters</button> 
		</div>

	</form>

</div>


{% else %}
<p>Simulation is not yet active.</p>

{% if request.user.is_staff %}
<div class="well"><form action="/run/toggle/" method="post">Staff only: <input type="submit" class="btn btn-warning"
				 value="Enable Simulation" /></form></div>
{% endif %}

{% endflag %}
{% endblock %}
